<% layout('layout') -%>
<% script() -%>
<% stylesheet() -%>
<div id="contentPoker" class="row">
    <% for(var i=0; i<tables.length; i++) {%>
        <div class="col-lg-3 col-md-6">
            <div class="panel panel-green">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-8">
                            <div style="font-size: 35px;" >Table <%= tables[i].table %></div>
                        </div>
                        <div class="col-xs-4 text-right">
                            <div class="huge"><%= tables[i].user.length %></div>
                            <div>Users</div>
                        </div>
                    </div>
                </div>
                <a href="/poker/table/<%= tables[i].table %>">
                    <div class="panel-footer">
                        <span class="pull-left">Enter</span>
                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                        <div class="clearfix"></div>
                    </div>
                </a>
            </div>          
        </div>
        <% } %>
        <div class="col-lg-12">
            <button id="createTable" type="button" class="btn btn-default">Create table</button>
        </div>
</div>
<!-- /.row -->
<div class="row">
    <div class="col-lg-12">
        <div id="player_panel" class="panel panel-success">
            <div class="panel-heading">
                Info poker
            </div>
            <div class="panel-body">
                <p>
                    La quinte royale
                    Il s'agit d'une quinte flush du 10 à l'As.
                </p>
                <p>
                    La quinte flush
                    Une quinte flush est une suite dont toutes les cartes sont de la même couleur.
                </p>
                <p>
                    Le carré
                    Un carré est composé de quatre cartes de même rang.
                </p>
                <p>

                    Le full
                    Un full est composé d'un brelan et d'une paire.
                </p>
                <p>
                    La couleur
                    Une couleur est composée de cinq cartes de la même couleur et de n'importe quel rang.
                </p>
                <p>
                    La quinte
                    La quinte est une suite de cinq cartes. Toute quinte contient obligatoirement un 5 ou un 10.
                </p>
                <p>
                    Le brelan
                    Un brelan est constitué de trois cartes de même rang.
                </p>
                <p>
                    La double paire
                    Une double paire est constituée de deux cartes de même rang et d'une autre paire de deux cartes d'un autre rang.
                </p>
                <p>
                    La paire
                    Une paire est constituée de deux cartes de même valeur.
                </p>
                <p>
                    La carte haute
                    La main possédant la(les) plus haute(s) carte(s) est gagnante.
                </p>
            </div>
        </div>
    </div>
    <!-- /.col-lg-12 -->
</div>
<script src="/socket.io/socket.io.js"></script>
<script>
    $(document).ready(function(){
        var socket = io.connect('http://dev-monkey.org:8080');
        $('#createTable').click(function (event) {
            event.stopPropagation();
            var nbTable = document.getElementById('contentPoker').childNodes.length+1;
            alert(nbTable);
            socket.emit('create_table', nbTable);
            var content = '<div class="col-lg-3 col-md-6">\
            <div class="panel panel-green">\
                <div class="panel-heading">\
                    <div class="row">\
                        <div class="col-xs-8">\
                            <div style="font-size: 35px;" >Table '+nbTable+'</div>\
                        </div>\
                        <div class="col-xs-4 text-right">\
                            <div class="huge"></div>\
                            <div>Users</div>\
                        </div>\
                    </div>\
                </div>\
                <a href="/poker/table/'+nbTable+'">\
                    <div class="panel-footer">\
                        <span class="pull-left">Enter</span>\
                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>\
                        <div class="clearfix"></div>\
                    </div>\
                </a>\
            </div></div>';
            $('.row:first').append(content);
        });   
    });
</script>