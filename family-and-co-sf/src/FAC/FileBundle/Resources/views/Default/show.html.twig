{% extends 'FOSUserBundle::layout.html.twig' %}
{% block title %}
Partage de {{ app.request.get('user_name') }}
{% endblock %}
{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('bundles/facgeneral/css/jquery-ui.min.css') }}">
    <link rel="stylesheet" href="{{ asset('bundles/facgeneral/css/defaultTheme.css') }}">
    <link rel="stylesheet" href="{{ asset('bundles/facgeneral/css/video-js.min.css') }}">
{% endblock %}
{% block javascripts %}
    <!-- The Templates plugin is included to render the upload/download listings -->
    <script src="{{ asset('bundles/facgeneral/js/jquery.lazyload.min.js') }}"></script>
    <script src="{{ asset('bundles/facgeneral/js/tmpl.min.js') }}"></script>
    <script src="{{ asset('bundles/facgeneral/js/video.js') }}"></script>
{% endblock %}
{% block body %}
<!-- Unless using the CDN hosted version, update the URL to the Flash SWF -->
<script>
videojs.options.flash.swf = "{{ asset('bundles/facgeneral/js/video-js.swf') }}";
</script>
 <div class="btn-group pull-right">
    <button data-tooltip="tooltip" title="Afficher en liste" onclick="generateList()" id="generateList" type="button" class="btn btn-default {{ app.user and app.user.backParams and app.user.backParams.display == 'liste' ? 'active' : '' }}">
        <span class="glyphicon glyphicon-list"></span>
    </button>
     <button data-tooltip="tooltip" title="Afficher en icones" onclick="generatePrevu()" id="generatePrevu" type="button" class="btn btn-default {{ app.user and app.user.backParams and app.user.backParams.display == 'prevu' ? 'active' : '' }}">
        <span class="glyphicon glyphicon-th-large"></span>
    </button>
</div> 
<div class="row">
    <div id="filesManager" class="col-lg-12 col-md-12 col-xs-12">
    </div>
</div>
<script>
$(document).ready(function() {
    var params = document.URL.split('/');
    var hash = document.URL.split('#');
    console.log(hash[1]);
    if(hash[1])
    	var folder_selected = hash[1];
    else
    	var folder_selected = (params[6]) ? params[6] : params[5];
    if(folder_selected){
	    var elem = $('#folder-selection li[data-name="'+folder_selected+'"]');
	    elem.trigger("click");
    }else{
    	$('li.folder:first').trigger('click');
    }
    $('#folder-selection').find('li.title').next('li').show();
});
</script>
{% endblock %}